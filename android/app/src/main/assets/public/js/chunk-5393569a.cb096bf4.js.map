{"version":3,"sources":["webpack:///./src/views/Reusables/SkeletonLoader.vue?7ac4","webpack:///./public/assets/images/events/default-image.jpg","webpack:///./src/views/Authenticated/Posting/Content.vue","webpack:///./src/views/Reusables/SkeletonLoader.vue","webpack:///./src/views/Reusables/SkeletonLoader.vue?8af8","webpack:///./src/views/Authenticated/Posting/Content.vue?2a87","webpack:///./src/views/Authenticated/Posting/Content.vue?2fa5","webpack:///./public/assets/images/posts/star.svg"],"names":["module","exports","class","fullscreen","event","loadEvent","src","shareSocial","style","like","starImage","likeHandler","attending","book","presentAlert","closeCircle","router","push","value","manCount","length","womanCount","unknownCount","title","likes","address","kmaway","eventStatus","moment","startDate","format","endDate","startTime","endTime","man","woman","help","description","animated","name","components","IonSkeletonText","render","IonContent","IonPage","IonIcon","IonButton","SkeletonLoader","IonProgressBar","setup","store","user","state","users","userEvents","events","status","route","defaultImage","toRad","Value","Math","PI","calcCrow","lat1","lon1","lat2","lon2","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","d","id","params","dispatch","then","res","eventStart","Date","diff","eventEnd","coordinates","latitude","longitude","toFixed","attendies","some","e","filter","gender","eventId","setTimeout","commit","create","cssClass","subHeader","message","buttons","text","role","handler","alert","present","thumbsUp"],"mappings":"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","file":"js/chunk-5393569a.cb096bf4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SkeletonLoader.vue?vue&type=style&index=0&id=5a7b054e&lang=css\"","module.exports = __webpack_public_path__ + \"img/default-image.440b9b23.jpg\";","<template>\n  <ion-page>\n    <ion-content :fullscreen=\"true\">\n      <div class=\"event-main-container\" v-if=\"event && loadEvent === 'idle'\">\n        <div class=\"event-menu-container\">\n          <ion-icon :src=\"shareSocial\" />\n          <ion-icon :style=\"like ? 'color: yellow' : 'color: #fff'\" :src=\"starImage\" @click=\"likeHandler\"/>\n          <ion-icon :style=\"attending ? 'color: yellow' : 'color: #fff'\" :src=\"book\" @click=\"presentAlert\"/>\n        </div>\n        <div class=\"event-menu-container-right\">\n          <ion-icon :src=\"closeCircle\" @click=\"router.push('/map')\" />\n        </div>\n        \n        <div\n          class=\"event-image-container\"\n          :style=\"`background-image: url(${\n            (event && event.banner) || defaultImage\n          })`\"\n        >\n        <div class=\"event-meter\">\n             <ion-progress-bar :value=\"(manCount.length+womanCount.length+unknownCount).length/100\"></ion-progress-bar>\n        </div>\n        </div>\n        <div class=\"event-title-container\">\n          <h5>{{ event && event.title }}</h5>\n          <div class=\"event-star\">\n            <ion-icon :src=\"starImage\"></ion-icon>\n            <span>{{event.likes}}</span>\n          </div>\n          <div class=\"event-distance\">\n            <p>{{ event && event.address }}</p>\n            <p\n              :style=\"\n                kmaway > 50\n                  ? 'color: red'\n                  : kmaway > 10 && kmaway < 21\n                  ? 'color: orange'\n                  : kmaway > 2 && kmaway < 11\n                  ? 'color: skyblue'\n                  : 'color: white'\n              \"\n            >\n              {{ kmaway }} KM away\n            </p>\n            <p\n              :style=\"\n                eventStatus === 'ended'\n                  ? 'color: red;'\n                  : eventStatus === 'Upcomming'\n                  ? 'color: yellow;'\n                  : ''\n              \"\n            >\n              ({{ eventStatus }})\n            </p>\n          </div>\n          <div class=\"event-address\">\n            <p>\n              {{ event && moment(event.startDate).format(\"ll\") }} -\n              {{ event && moment(event.endDate).format(\"ll\") }}\n            </p>\n            <p>\n              {{ event && moment(event.startDate).format(\"ddd\") }}\n              {{ event && event.startTime }} -\n              {{ event && moment(event.endDate).format(\"ddd\") }}\n              {{ event && event.endTime }}\n            </p>\n          </div>\n        </div>\n        <div class=\"event-chat-container\">\n          <div class=\"event-atendies\">\n              <span><ion-icon :src=\"man\" />{{manCount.length}}</span>\n              <span><ion-icon :src=\"woman\" />{{womanCount.length}}</span>\n              <span><ion-icon :src=\"help\" />{{unknownCount.length}}</span>\n          </div>\n          <ion-button>JOIN LIVE CHAT</ion-button>\n        </div>\n        <div class=\"event-content\">\n          <p>{{ event && event.description }}</p>\n        </div>\n      </div>\n      <skeleton-loader v-else />\n    </ion-content>\n  </ion-page>\n</template>\n\n<script lang=\"ts\">\nimport { IonContent, IonPage, IonIcon, IonButton, alertController, IonProgressBar } from \"@ionic/vue\";\nimport { computed, defineComponent, ref, onUpdated, watchEffect, onMounted, onBeforeMount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport moment from \"moment\";\nimport { shareSocial, thumbsUp, book, closeCircle, man, woman, help } from \"ionicons/icons\";\nimport SkeletonLoader from \"../../Reusables/SkeletonLoader.vue\";\nexport default defineComponent({\n  components: {\n    IonContent,\n    IonPage,\n    IonIcon,\n    IonButton,\n    SkeletonLoader,\n    IonProgressBar,\n  },\n  setup() {\n    const store = useStore();\n    const user = computed(() => store.state.users.user);\n    const userEvents = computed(() => store.state.users.events)\n    const event = computed(() => store.state.events.event);\n    const loadEvent = computed(() => store.state.events.status);\n    const route = useRoute();\n    const router = useRouter();\n    const eventStatus = ref(\"Upcomming\");\n    const kmaway = ref();\n    const attending = ref(false);\n    const like = ref(false);\n    const manCount = ref([])\n    const womanCount = ref([])\n    const unknownCount = ref([])\n    const defaultImage = computed(() =>\n      require(\"../../../../public/assets/images/events/default-image.jpg\")\n    );\n    const starImage = computed(() =>\n      require(\"../../../../public/assets/images/posts/star.svg\")\n    );\n\n    const toRad = (Value: any) => {\n      return (Value * Math.PI) / 180;\n    };\n\n    const calcCrow = (lat1: any, lon1: any, lat2: any, lon2: any) => {\n      const R = 6371; // km\n      const dLat = toRad(lat2 - lat1);\n      const dLon = toRad(lon2 - lon1);\n      lat1 = toRad(lat1);\n      lat2 = toRad(lat2);\n\n      const a =\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.sin(dLon / 2) *\n          Math.sin(dLon / 2) *\n          Math.cos(lat1) *\n          Math.cos(lat2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      const d = R * c;\n      return d;\n    };\n\n    watchEffect(async () => {\n      if (loadEvent.value === \"load\") {\n        const { id } = route.params;\n        await store.dispatch(\"events/getEvent\", id).then((res) => {\n          const eventStart = moment(\n            new Date(res.startDate + \" \" + res.startTime)\n          ).diff(new Date(), \"minutes\");\n          const eventEnd = moment(\n            new Date(res.endDate + \" \" + res.endTime)\n          ).diff(new Date(), \"minutes\");\n          kmaway.value = calcCrow(\n            user.value.coordinates.latitude,\n            user.value.coordinates.longitude,\n            res.coordinates.latitude,\n            res.coordinates.longitude\n          ).toFixed(2);\n          if (eventStart > 0 && eventEnd > 0) {\n            eventStatus.value = \"Upcomming\";\n          } else if (eventStart < 0 && eventEnd > 0) {\n            eventStatus.value = \"Ongoing\";\n          } else {\n            eventStatus.value = \"Ended\";\n          }\n          attending.value = res.attendies.some((e: any) => e.id === user.value.id)\n          manCount.value = res.attendies.filter((e: any) => e.gender === 'male')\n          womanCount.value = res.attendies.filter((e: any) => e.gender === 'female')\n          unknownCount.value = res.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n          like.value = userEvents.value.some((e: any) => e.id === res.eventId && e.like === true)\n        });\n        setTimeout(() => {\n          store.commit(\"events/eventStatus\", \"idle\");\n        }, 1000);\n      }\n    });\n    const presentAlert = async () => {\n      if(!attending.value){\n      const alert = await alertController\n        .create({\n          cssClass: 'confirmation-alert',\n          subHeader: 'Event Notification',\n          message: 'Please confirm if you are going to attend this event.',\n          buttons: [\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              cssClass: 'secondary'\n            },\n            {\n              text: 'Confirm',\n              handler: () => {\n                store.dispatch('events/confirmAttendance', {user: user.value, event: event.value}).then(()=>{\n                    attending.value = true\n                    manCount.value = event.value.attendies.filter((e: any) => e.gender === 'male')\n                    womanCount.value = event.value.attendies.filter((e: any) => e.gender === 'female')\n                    unknownCount.value = event.value.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n                })\n              },\n            },\n          ],\n        });\n        return alert.present();\n      }else {\n        const alert = await alertController\n        .create({\n          cssClass: 'confirmation-alert',\n          subHeader: 'Event Notification',\n          message: 'Cancelling your attendance to this event?',\n          buttons: [\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              cssClass: 'secondary'\n            },\n            {\n              text: 'Confirm',\n              handler: () => {\n                store.dispatch('events/cancelAttendance', {user: user.value, event: event.value}).then(()=>{\n                    attending.value = false\n                    manCount.value = event.value.attendies.filter((e: any) => e.gender === 'male')\n                    womanCount.value = event.value.attendies.filter((e: any) => e.gender === 'female')\n                    unknownCount.value = event.value.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n                })\n              },\n            },\n          ],\n        });\n        return alert.present();\n      }\n      \n    }\n    const likeHandler = async () => {\n        like.value = like.value ? false : true;\n        await store.dispatch('events/likeEvent', {user: user.value, event: event.value, like: like.value}).then(() => {\n            store.commit('users/updateLike', {eventId: event.value.eventId, like: like.value})\n        })\n    }\n    return {\n      user,\n      event,\n      defaultImage,\n      starImage,\n      moment,\n      shareSocial,\n      thumbsUp,\n      book,\n      kmaway,\n      SkeletonLoader,\n      loadEvent,\n      eventStatus,\n      closeCircle,\n      router,\n      presentAlert,\n      attending,\n      likeHandler,\n      like,\n      userEvents,\n      man,\n      woman,\n      help,\n      manCount,\n      womanCount,\n      unknownCount,\n    };\n  },\n});\n</script>\n","<template>\n  <div class=\"custom-skeleton\">\n    <div class=\"skeleton-image\">\n      <ion-skeleton-text\n        animated\n        style=\"width: 100%; line-height: 30vh\"\n      ></ion-skeleton-text>\n    </div>\n    <div class=\"skeleton-header\">\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 20%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n    </div>\n    <div class=\"skeleton-button\">\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 30px; flex-basis: 50%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 30px; flex-basis: 50%\"\n      ></ion-skeleton-text>\n    </div>\n    <div class=\"skeleton-content\">\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 20%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 20%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 20%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 40%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 80%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n      <ion-skeleton-text\n        animated\n        style=\"width: 20%; line-height: 15px; flex-basis: 100%\"\n      ></ion-skeleton-text>\n    </div>\n  </div>\n</template>\n\n<style>\n/* Custom Skeleton Line Height and Margin */\n.custom-skeleton {\n  line-height: 13px;\n  display: flex;\n  background-color: rgb(240, 239, 239);\n  flex-direction: column;\n}\n.skeleton-image {\n  min-height: 30vh;\n  background-color: rgb(219, 219, 219);\n  flex-basis: 100%;\n}\n.skeleton-header {\n  min-height: 10vh;\n  flex-basis: 100%;\n  background-color: rgb(187, 186, 186);\n}\n.skeleton-button {\n  display: flex;\n  min-height: 9vh;\n  background-color: rgb(187, 186, 186);\n}\n.skeleton-content {\n  min-height: 47.2vh;\n  background-color: rgb(161, 159, 159);\n  display: flex;\n  flex-direction: column;\n}\n</style>\n\n<script>\nimport { IonSkeletonText } from \"@ionic/vue\";\nimport { defineComponent } from \"vue\";\n\nexport default defineComponent({\n  name: \"SkeletonLoader\",\n  components: {\n    IonSkeletonText,\n  },\n});\n</script>","import { render } from \"./SkeletonLoader.vue?vue&type=template&id=5a7b054e\"\nimport script from \"./SkeletonLoader.vue?vue&type=script&lang=js\"\nexport * from \"./SkeletonLoader.vue?vue&type=script&lang=js\"\n\nimport \"./SkeletonLoader.vue?vue&type=style&index=0&id=5a7b054e&lang=css\"\nscript.render = render\n\nexport default script","\nimport { IonContent, IonPage, IonIcon, IonButton, alertController, IonProgressBar } from \"@ionic/vue\";\nimport { computed, defineComponent, ref, onUpdated, watchEffect, onMounted, onBeforeMount } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport moment from \"moment\";\nimport { shareSocial, thumbsUp, book, closeCircle, man, woman, help } from \"ionicons/icons\";\nimport SkeletonLoader from \"../../Reusables/SkeletonLoader.vue\";\nexport default defineComponent({\n  components: {\n    IonContent,\n    IonPage,\n    IonIcon,\n    IonButton,\n    SkeletonLoader,\n    IonProgressBar,\n  },\n  setup() {\n    const store = useStore();\n    const user = computed(() => store.state.users.user);\n    const userEvents = computed(() => store.state.users.events)\n    const event = computed(() => store.state.events.event);\n    const loadEvent = computed(() => store.state.events.status);\n    const route = useRoute();\n    const router = useRouter();\n    const eventStatus = ref(\"Upcomming\");\n    const kmaway = ref();\n    const attending = ref(false);\n    const like = ref(false);\n    const manCount = ref([])\n    const womanCount = ref([])\n    const unknownCount = ref([])\n    const defaultImage = computed(() =>\n      require(\"../../../../public/assets/images/events/default-image.jpg\")\n    );\n    const starImage = computed(() =>\n      require(\"../../../../public/assets/images/posts/star.svg\")\n    );\n\n    const toRad = (Value: any) => {\n      return (Value * Math.PI) / 180;\n    };\n\n    const calcCrow = (lat1: any, lon1: any, lat2: any, lon2: any) => {\n      const R = 6371; // km\n      const dLat = toRad(lat2 - lat1);\n      const dLon = toRad(lon2 - lon1);\n      lat1 = toRad(lat1);\n      lat2 = toRad(lat2);\n\n      const a =\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.sin(dLon / 2) *\n          Math.sin(dLon / 2) *\n          Math.cos(lat1) *\n          Math.cos(lat2);\n      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n      const d = R * c;\n      return d;\n    };\n\n    watchEffect(async () => {\n      if (loadEvent.value === \"load\") {\n        const { id } = route.params;\n        await store.dispatch(\"events/getEvent\", id).then((res) => {\n          const eventStart = moment(\n            new Date(res.startDate + \" \" + res.startTime)\n          ).diff(new Date(), \"minutes\");\n          const eventEnd = moment(\n            new Date(res.endDate + \" \" + res.endTime)\n          ).diff(new Date(), \"minutes\");\n          kmaway.value = calcCrow(\n            user.value.coordinates.latitude,\n            user.value.coordinates.longitude,\n            res.coordinates.latitude,\n            res.coordinates.longitude\n          ).toFixed(2);\n          if (eventStart > 0 && eventEnd > 0) {\n            eventStatus.value = \"Upcomming\";\n          } else if (eventStart < 0 && eventEnd > 0) {\n            eventStatus.value = \"Ongoing\";\n          } else {\n            eventStatus.value = \"Ended\";\n          }\n          attending.value = res.attendies.some((e: any) => e.id === user.value.id)\n          manCount.value = res.attendies.filter((e: any) => e.gender === 'male')\n          womanCount.value = res.attendies.filter((e: any) => e.gender === 'female')\n          unknownCount.value = res.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n          like.value = userEvents.value.some((e: any) => e.id === res.eventId && e.like === true)\n        });\n        setTimeout(() => {\n          store.commit(\"events/eventStatus\", \"idle\");\n        }, 1000);\n      }\n    });\n    const presentAlert = async () => {\n      if(!attending.value){\n      const alert = await alertController\n        .create({\n          cssClass: 'confirmation-alert',\n          subHeader: 'Event Notification',\n          message: 'Please confirm if you are going to attend this event.',\n          buttons: [\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              cssClass: 'secondary'\n            },\n            {\n              text: 'Confirm',\n              handler: () => {\n                store.dispatch('events/confirmAttendance', {user: user.value, event: event.value}).then(()=>{\n                    attending.value = true\n                    manCount.value = event.value.attendies.filter((e: any) => e.gender === 'male')\n                    womanCount.value = event.value.attendies.filter((e: any) => e.gender === 'female')\n                    unknownCount.value = event.value.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n                })\n              },\n            },\n          ],\n        });\n        return alert.present();\n      }else {\n        const alert = await alertController\n        .create({\n          cssClass: 'confirmation-alert',\n          subHeader: 'Event Notification',\n          message: 'Cancelling your attendance to this event?',\n          buttons: [\n            {\n              text: 'Cancel',\n              role: 'cancel',\n              cssClass: 'secondary'\n            },\n            {\n              text: 'Confirm',\n              handler: () => {\n                store.dispatch('events/cancelAttendance', {user: user.value, event: event.value}).then(()=>{\n                    attending.value = false\n                    manCount.value = event.value.attendies.filter((e: any) => e.gender === 'male')\n                    womanCount.value = event.value.attendies.filter((e: any) => e.gender === 'female')\n                    unknownCount.value = event.value.attendies.filter((e: any) => e.gender !== 'female' && e.gender !== 'male')\n                })\n              },\n            },\n          ],\n        });\n        return alert.present();\n      }\n      \n    }\n    const likeHandler = async () => {\n        like.value = like.value ? false : true;\n        await store.dispatch('events/likeEvent', {user: user.value, event: event.value, like: like.value}).then(() => {\n            store.commit('users/updateLike', {eventId: event.value.eventId, like: like.value})\n        })\n    }\n    return {\n      user,\n      event,\n      defaultImage,\n      starImage,\n      moment,\n      shareSocial,\n      thumbsUp,\n      book,\n      kmaway,\n      SkeletonLoader,\n      loadEvent,\n      eventStatus,\n      closeCircle,\n      router,\n      presentAlert,\n      attending,\n      likeHandler,\n      like,\n      userEvents,\n      man,\n      woman,\n      help,\n      manCount,\n      womanCount,\n      unknownCount,\n    };\n  },\n});\n","import { render } from \"./Content.vue?vue&type=template&id=76bdfd1c\"\nimport script from \"./Content.vue?vue&type=script&lang=ts\"\nexport * from \"./Content.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","module.exports = __webpack_public_path__ + \"img/star.96105818.svg\";"],"sourceRoot":""}